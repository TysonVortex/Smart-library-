<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Library Book Management System - Registration</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            --secondary-color: #64748b;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --background-color: #f8fafc;
            --surface-color: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-light: #94a3b8;
            --border-color: #e2e8f0;
            --border-focus: #3b82f6;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --border-radius: 0.5rem;
            --border-radius-lg: 0.75rem;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
            color: var(--text-primary);
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
            animation: backgroundShift 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(-20px) translateY(-10px); }
            50% { transform: translateX(10px) translateY(-20px); }
            75% { transform: translateX(-10px) translateY(10px); }
        }

        /* Container Styles */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
            position: relative;
            z-index: 1;
        }

        /* Header Styles */
        .header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            border-radius: 2px;
            animation: slideIn 1s ease-out;
        }

        @keyframes slideIn {
            from { width: 0; opacity: 0; }
            to { width: 100px; opacity: 1; }
        }

        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            position: relative;
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .logo::before {
            content: '📚';
            font-size: 2rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .header p {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 0;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Main Form Container */
        .form-container {
            background: var(--surface-color);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            position: relative;
            animation: scaleIn 0.8s ease-out;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .form-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color), var(--success-color));
            animation: progressBar 2s ease-out;
        }

        @keyframes progressBar {
            from { transform: scaleX(0); }
            to { transform: scaleX(1); }
        }

        /* Form Header */
        .form-header {
            padding: 2rem 2rem 1rem;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-bottom: 1px solid var(--border-color);
        }

        .form-header h2 {
            font-size: 1.875rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .form-header h2::before {
            content: '✨';
            font-size: 1.5rem;
            animation: sparkle 2s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
        }

        .form-header p {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Form Body */
        .form-body {
            padding: 2rem;
        }

        /* Step Navigation */
        .step-navigation {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            position: relative;
        }

        .step-navigation::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--border-color);
            transform: translateY(-50%);
            z-index: 0;
        }

        .step {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--surface-color);
            border: 3px solid var(--border-color);
            color: var(--text-secondary);
            font-weight: 600;
            position: relative;
            z-index: 1;
            transition: var(--transition);
            cursor: pointer;
        }

        .step:not(:last-child) {
            margin-right: 4rem;
        }

        .step.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2);
        }

        .step.completed {
            background: var(--success-color);
            border-color: var(--success-color);
            color: white;
        }

        .step.completed::before {
            content: '✓';
            font-weight: bold;
        }

        /* Form Steps */
        .form-step {
            display: none;
            animation: slideInStep 0.5s ease-out;
        }

        .form-step.active {
            display: block;
        }

        @keyframes slideInStep {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .step-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            text-align: center;
            position: relative;
        }

        .step-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            border-radius: 2px;
        }

        /* Form Groups and Grid */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .form-grid.two-columns {
            grid-template-columns: 1fr 1fr;
        }

        .form-grid.three-columns {
            grid-template-columns: repeat(3, 1fr);
        }

        .form-group {
            position: relative;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        /* Input Styles */
        .form-label {
            display: block;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            position: relative;
        }

        .form-label.required::after {
            content: '*';
            color: var(--error-color);
            margin-left: 0.25rem;
            font-weight: bold;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            line-height: 1.5;
            color: var(--text-primary);
            background-color: var(--surface-color);
            transition: var(--transition);
            position: relative;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            transform: translateY(-1px);
        }

        .form-input:hover,
        .form-select:hover,
        .form-textarea:hover {
            border-color: var(--primary-light);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* Input with Icon */
        .input-with-icon {
            position: relative;
        }

        .input-with-icon .form-input {
            padding-left: 2.75rem;
        }

        .input-icon {
            position: absolute;
            left: 0.875rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.125rem;
            pointer-events: none;
            transition: var(--transition);
        }

        .form-input:focus + .input-icon {
            color: var(--primary-color);
        }

        /* Checkbox and Radio Styles */
        .checkbox-group,
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            cursor: pointer;
            position: relative;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .checkbox-item:hover,
        .radio-item:hover {
            background-color: rgba(59, 130, 246, 0.05);
        }

        .checkbox-item input,
        .radio-item input {
            width: 1.25rem;
            height: 1.25rem;
            margin-right: 0.75rem;
            cursor: pointer;
            accent-color: var(--primary-color);
        }

        /* File Upload Styles */
        .file-upload {
            position: relative;
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 2rem;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }

        .file-upload:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }

        .file-upload.dragover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            transform: scale(1.02);
        }

        .file-upload input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-content {
            pointer-events: none;
        }

        .file-upload-icon {
            font-size: 3rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            display: block;
        }

        .file-upload-text {
            font-size: 1.125rem;
            color: var(--text-primary);
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .file-upload-hint {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Validation Styles */
        .form-error {
            color: var(--error-color);
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .form-success {
            color: var(--success-color);
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .form-input.error {
            border-color: var(--error-color);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .form-input.success {
            border-color: var(--success-color);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        /* Password Strength Indicator */
        .password-strength {
            margin-top: 0.5rem;
        }

        .strength-bar {
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .strength-fill {
            height: 100%;
            width: 0%;
            transition: var(--transition);
            border-radius: 2px;
        }

        .strength-weak { background: var(--error-color); width: 25%; }
        .strength-fair { background: var(--warning-color); width: 50%; }
        .strength-good { background: var(--primary-color); width: 75%; }
        .strength-strong { background: var(--success-color); width: 100%; }

        .strength-text {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Button Styles */
        .button-group {
            display: flex;
            gap: 1rem;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.875rem 2rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--surface-color);
            color: var(--text-secondary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--background-color);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn:disabled:hover {
            transform: none;
            box-shadow: var(--shadow-md);
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 2rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            width: 25%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .progress-text {
            text-align: center;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Success Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--surface-color);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            transform: scale(0.8);
            transition: var(--transition);
            box-shadow: var(--shadow-xl);
        }

        .modal.show .modal-content {
            transform: scale(1);
        }

        .modal-icon {
            font-size: 4rem;
            color: var(--success-color);
            margin-bottom: 1rem;
            display: block;
            animation: bounce 1s ease-in-out;
        }

        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0, 0, 0); }
            40%, 43% { transform: translate3d(0, -30px, 0); }
            70% { transform: translate3d(0, -15px, 0); }
            90% { transform: translate3d(0, -4px, 0); }
        }

        .modal h3 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .modal p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1rem 0.5rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .form-container {
                margin: 0 0.5rem;
            }
            
            .form-header,
            .form-body {
                padding: 1.5rem 1rem;
            }
            
            .form-grid.two-columns,
            .form-grid.three-columns {
                grid-template-columns: 1fr;
            }
            
            .step-navigation {
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .step:not(:last-child) {
                margin-right: 0;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.75rem;
            }
            
            .step-title {
                font-size: 1.25rem;
            }
            
            .form-input,
            .form-select,
            .form-textarea {
                padding: 0.75rem;
            }
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }

        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }

        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }

        .hidden { display: none; }
        .visible { display: block; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--background-color);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--text-light);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        /* Focus visible for accessibility */
        .btn:focus-visible,
        .form-input:focus-visible,
        .form-select:focus-visible,
        .form-textarea:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Print styles */
        @media print {
            body {
                background: white;
            }
            
            .form-container {
                box-shadow: none;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>
    <!-- (All HTML structure from the original file remains unchanged) -->
      <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo"></div>
            <h1>Smart Library Management</h1>
            <p>Register to access our comprehensive book management system</p>
        </header>

        <!-- Main Form Container -->
        <div class="form-container">
            <div class="form-header">
                <h2>Create Your Account</h2>
                <p>Join thousands of users managing their library efficiently</p>
            </div>

            <div class="form-body">
                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">Step 1 of 4 - Personal Information</div>
                </div>

                <!-- Step Navigation -->
                <div class="step-navigation">
                    <div class="step active" data-step="1">1</div>
                    <div class="step" data-step="2">2</div>
                    <div class="step" data-step="3">3</div>
                    <div class="step" data-step="4">4</div>
                </div>

                <!-- Registration Form -->
                <form id="registrationForm" novalidate>
                    <!-- Step 1: Personal Information -->
                    <div class="form-step active" data-step="1">
                        <h3 class="step-title">Personal Information</h3>
                        <div class="form-grid two-columns">
                            <div class="form-group">
                                <label for="firstName" class="form-label required">First Name</label>
                                <div class="input-with-icon">
                                    <input type="text" id="firstName" name="firstName" class="form-input" required>
                                    <span class="input-icon">👤</span>
                                </div>
                                <div class="form-error" id="firstNameError"></div>
                            </div>

                            <div class="form-group">
                                <label for="lastName" class="form-label required">Last Name</label>
                                <div class="input-with-icon">
                                    <input type="text" id="lastName" name="lastName" class="form-input" required>
                                    <span class="input-icon">👤</span>
                                </div>
                                <div class="form-error" id="lastNameError"></div>
                            </div>

                            <div class="form-group">
                                <label for="email" class="form-label required">Email Address</label>
                                <div class="input-with-icon">
                                    <input type="email" id="email" name="email" class="form-input" required>
                                    <span class="input-icon">📧</span>
                                </div>
                                <div class="form-error" id="emailError"></div>
                            </div>

                            <div class="form-group">
                                <label for="phone" class="form-label required">Phone Number</label>
                                <div class="input-with-icon">
                                    <input type="tel" id="phone" name="phone" class="form-input" required>
                                    <span class="input-icon">📱</span>
                                </div>
                                <div class="form-error" id="phoneError"></div>
                            </div>

                            <div class="form-group">
                                <label for="dateOfBirth" class="form-label required">Date of Birth</label>
                                <div class="input-with-icon">
                                    <input type="date" id="dateOfBirth" name="dateOfBirth" class="form-input" required>
                                    <span class="input-icon">📅</span>
                                </div>
                                <div class="form-error" id="dateOfBirthError"></div>
                            </div>

                            <div class="form-group">
                                <label for="gender" class="form-label required">Gender</label>
                                <select id="gender" name="gender" class="form-select" required>
                                    <option value="">Select Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                    <option value="prefer-not-to-say">Prefer not to say</option>
                                </select>
                                <div class="form-error" id="genderError"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Address Information -->
                    <div class="form-step" data-step="2">
                        <h3 class="step-title">Address Information</h3>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label for="address1" class="form-label required">Street Address</label>
                                <div class="input-with-icon">
                                    <input type="text" id="address1" name="address1" class="form-input" required>
                                    <span class="input-icon">🏠</span>
                                </div>
                                <div class="form-error" id="address1Error"></div>
                            </div>

                            <div class="form-group full-width">
                                <label for="address2" class="form-label">Apartment, suite, etc. (Optional)</label>
                                <div class="input-with-icon">
                                    <input type="text" id="address2" name="address2" class="form-input">
                                    <span class="input-icon">🏢</span>
                                </div>
                            </div>

                            <div class="form-grid three-columns">
                                <div class="form-group">
                                    <label for="city" class="form-label required">City</label>
                                    <div class="input-with-icon">
                                        <input type="text" id="city" name="city" class="form-input" required>
                                        <span class="input-icon">🏙️</span>
                                    </div>
                                    <div class="form-error" id="cityError"></div>
                                </div>

                                <div class="form-group">
                                    <label for="state" class="form-label required">State/Province</label>
                                    <select id="state" name="state" class="form-select" required>
                                        <option value="">Select State</option>
                                        <option value="gujarat">Gujarat</option>
                                        <option value="maharashtra">Maharashtra</option>
                                        <option value="rajasthan">Rajasthan</option>
                                        <option value="delhi">Delhi</option>
                                        <option value="karnataka">Karnataka</option>
                                        <option value="tamil-nadu">Tamil Nadu</option>
                                        <option value="kerala">Kerala</option>
                                        <option value="west-bengal">West Bengal</option>
                                        <option value="punjab">Punjab</option>
                                        <option value="haryana">Haryana</option>
                                        <option value="uttar-pradesh">Uttar Pradesh</option>
                                        <option value="madhya-pradesh">Madhya Pradesh</option>
                                        <option value="bihar">Bihar</option>
                                        <option value="odisha">Odisha</option>
                                        <option value="andhra-pradesh">Andhra Pradesh</option>
                                        <option value="telangana">Telangana</option>
                                        <option value="assam">Assam</option>
                                        <option value="jharkhand">Jharkhand</option>
                                        <option value="chhattisgarh">Chhattisgarh</option>
                                        <option value="uttarakhand">Uttarakhand</option>
                                    </select>
                                    <div class="form-error" id="stateError"></div>
                                </div>

                                <div class="form-group">
                                    <label for="zipCode" class="form-label required">ZIP/Postal Code</label>
                                    <div class="input-with-icon">
                                        <input type="text" id="zipCode" name="zipCode" class="form-input" required>
                                        <span class="input-icon">📮</span>
                                    </div>
                                    <div class="form-error" id="zipCodeError"></div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="country" class="form-label required">Country</label>
                                <select id="country" name="country" class="form-select" required>
                                    <option value="">Select Country</option>
                                    <option value="india" selected>India</option>
                                    <option value="usa">United States</option>
                                    <option value="uk">United Kingdom</option>
                                    <option value="canada">Canada</option>
                                    <option value="australia">Australia</option>
                                    <option value="germany">Germany</option>
                                    <option value="france">France</option>
                                    <option value="japan">Japan</option>
                                    <option value="china">China</option>
                                    <option value="other">Other</option>
                                </select>
                                <div class="form-error" id="countryError"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Account Details -->
                    <div class="form-step" data-step="3">
                        <h3 class="step-title">Account Details</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="username" class="form-label required">Username</label>
                                <div class="input-with-icon">
                                    <input type="text" id="username" name="username" class="form-input" required>
                                    <span class="input-icon">👤</span>
                                </div>
                                <div class="form-error" id="usernameError"></div>
                                <div class="form-success" id="usernameSuccess"></div>
                            </div>

                            <div class="form-group">
                                <label for="password" class="form-label required">Password</label>
                                <div class="input-with-icon">
                                    <input type="password" id="password" name="password" class="form-input" required>
                                    <span class="input-icon">🔒</span>
                                </div>
                                <div class="password-strength">
                                    <div class="strength-bar">
                                        <div class="strength-fill" id="strengthFill"></div>
                                    </div>
                                    <div class="strength-text" id="strengthText">Password strength: Weak</div>
                                </div>
                                <div class="form-error" id="passwordError"></div>
                            </div>

                            <div class="form-group">
                                <label for="confirmPassword" class="form-label required">Confirm Password</label>
                                <div class="input-with-icon">
                                    <input type="password" id="confirmPassword" name="confirmPassword" class="form-input" required>
                                    <span class="input-icon">🔒</span>
                                </div>
                                <div class="form-error" id="confirmPasswordError"></div>
                                <div class="form-success" id="confirmPasswordSuccess"></div>
                            </div>

                            <div class="form-group">
                                <label for="accountType" class="form-label required">Account Type</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <input type="radio" id="student" name="accountType" value="student" required>
                                        <label for="student">Student</label>
                                    </div>
                                    <div class="radio-item">
                                        <input type="radio" id="faculty" name="accountType" value="faculty" required>
                                        <label for="faculty">Faculty</label>
                                    </div>
                                    <div class="radio-item">
                                        <input type="radio" id="staff" name="accountType" value="staff" required>
                                        <label for="staff">Staff</label>
                                    </div>
                                    <div class="radio-item">
                                        <input type="radio" id="public" name="accountType" value="public" required>
                                        <label for="public">Public Member</label>
                                    </div>
                                </div>
                                <div class="form-error" id="accountTypeError"></div>
                            </div>

                            <div class="form-group" id="studentFields" style="display: none;">
                                <label for="studentId" class="form-label">Student ID</label>
                                <div class="input-with-icon">
                                    <input type="text" id="studentId" name="studentId" class="form-input">
                                    <span class="input-icon">🎓</span>
                                </div>
                                <div class="form-error" id="studentIdError"></div>
                            </div>

                            <div class="form-group" id="facultyFields" style="display: none;">
                                <label for="department" class="form-label">Department</label>
                                <select id="department" name="department" class="form-select">
                                    <option value="">Select Department</option>
                                    <option value="computer-science">Computer Science</option>
                                    <option value="mathematics">Mathematics</option>
                                    <option value="physics">Physics</option>
                                    <option value="chemistry">Chemistry</option>
                                    <option value="biology">Biology</option>
                                    <option value="english">English</option>
                                    <option value="history">History</option>
                                    <option value="economics">Economics</option>
                                    <option value="psychology">Psychology</option>
                                    <option value="sociology">Sociology</option>
                                    <option value="engineering">Engineering</option>
                                    <option value="medicine">Medicine</option>
                                    <option value="law">Law</option>
                                    <option value="business">Business</option>
                                    <option value="arts">Arts</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- Step 4: Preferences & Upload -->
                    <div class="form-step" data-step="4">
                        <h3 class="step-title">Preferences & Documents</h3>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label class="form-label">Reading Interests</label>
                                <div class="checkbox-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="fiction" name="interests" value="fiction">
                                        <label for="fiction">Fiction</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="non-fiction" name="interests" value="non-fiction">
                                        <label for="non-fiction">Non-Fiction</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="science" name="interests" value="science">
                                        <label for="science">Science</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="technology" name="interests" value="technology">
                                        <label for="technology">Technology</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="history" name="interests" value="history">
                                        <label for="history">History</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="biography" name="interests" value="biography">
                                        <label for="biography">Biography</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="mystery" name="interests" value="mystery">
                                        <label for="mystery">Mystery</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="romance" name="interests" value="romance">
                                        <label for="romance">Romance</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="fantasy" name="interests" value="fantasy">
                                        <label for="fantasy">Fantasy</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="self-help" name="interests" value="self-help">
                                        <label for="self-help">Self Help</label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group full-width">
                                <label for="notifications" class="form-label">Notification Preferences</label>
                                <div class="checkbox-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="emailNotifications" name="notifications" value="email" checked>
                                        <label for="emailNotifications">Email Notifications</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="smsNotifications" name="notifications" value="sms">
                                        <label for="smsNotifications">SMS Notifications</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="pushNotifications" name="notifications" value="push" checked>
                                        <label for="pushNotifications">Push Notifications</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="dueDateReminders" name="notifications" value="due-date" checked>
                                        <label for="dueDateReminders">Due Date Reminders</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="newBookAlerts" name="notifications" value="new-books" checked>
                                        <label for="newBookAlerts">New Book Alerts</label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group full-width">
                                <label for="profilePicture" class="form-label">Profile Picture</label>
                                <div class="file-upload" id="profilePictureUpload">
                                    <input type="file" id="profilePicture" name="profilePicture" accept="image/*">
                                    <div class="file-upload-content">
                                        <span class="file-upload-icon">📷</span>
                                        <div class="file-upload-text">Choose a profile picture</div>
                                        <div class="file-upload-hint">PNG, JPG, GIF up to 5MB</div>
                                    </div>
                                </div>
                                <div class="form-error" id="profilePictureError"></div>
                            </div>

                            <div class="form-group full-width">
                                <label for="idDocument" class="form-label">ID Document</label>
                                <div class="file-upload" id="idDocumentUpload">
                                    <input type="file" id="idDocument" name="idDocument" accept=".pdf,.jpg,.jpeg,.png">
                                    <div class="file-upload-content">
                                        <span class="file-upload-icon">📄</span>
                                        <div class="file-upload-text">Upload ID Document</div>
                                        <div class="file-upload-hint">PDF, PNG, JPG up to 10MB</div>
                                    </div>
                                </div>
                                <div class="form-error" id="idDocumentError"></div>
                            </div>

                            <div class="form-group full-width">
                                <label for="bio" class="form-label">Bio (Optional)</label>
                                <textarea id="bio" name="bio" class="form-textarea" placeholder="Tell us a little about yourself and your reading preferences..."></textarea>
                                <div class="form-error" id="bioError"></div>
                            </div>

                            <div class="form-group full-width">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="terms" name="terms" required>
                                    <label for="terms">I agree to the <a href="#" target="_blank">Terms of Service</a> and <a href="#" target="_blank">Privacy Policy</a></label>
                                </div>
                                <div class="form-error" id="termsError"></div>
                            </div>

                            <div class="form-group full-width">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="newsletter" name="newsletter" checked>
                                    <label for="newsletter">Subscribe to our newsletter for library updates and book recommendations</label>
                                </div>
                            </div>
                        </div>
                    </div>
                  
                      <!-- Button Group -->
                    <div class="button-group">
                        <button type="button" id="prevBtn" class="btn btn-secondary" style="display: none;">
                            ← Previous
                        </button>
                        <button type="button" id="nextBtn" class="btn btn-primary">
                            Next →
                        </button>
                        <button type="submit" id="submitBtn" class="btn btn-primary" style="display: none;">
                            <span class="loading hidden"></span>
                            Create Account
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <span class="modal-icon">🎉</span>
            <h3>Registration Successful!</h3>
            <p>Your account has been created successfully. You will receive a confirmation email shortly.</p>
            <button type="button" class="btn btn-primary" onclick="closeModal()">
                Continue to Login
            </button>
        </div>
    </div>
              
    <script>
        // Global variables
        let currentStep = 1;
        const totalSteps = 4;
        let formData = {};

        // DOM elements
        const form = document.getElementById('registrationForm');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const successModal = document.getElementById('successModal');

        // Form validation rules
        const validationRules = {
            firstName: { required: true, minLength: 2, pattern: /^[a-zA-Z\s]+$/ },
            lastName: { required: true, minLength: 2, pattern: /^[a-zA-Z\s]+$/ },
            email: { required: true, pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/ },
            phone: { required: true, pattern: /^[\+]?[1-9][\d]{0,15}$/ },
            dateOfBirth: { required: true },
            gender: { required: true },
            address1: { required: true, minLength: 5 },
            city: { required: true, minLength: 2 },
            state: { required: true },
            zipCode: { required: true, pattern: /^[0-9]{5,10}$/ },
            country: { required: true },
            username: { required: true, minLength: 3, pattern: /^[a-zA-Z0-9_]+$/ },
            password: { required: true, minLength: 8 },
            confirmPassword: { required: true },
            accountType: { required: true },
            terms: { required: true }
        };

        // Password strength checker
        function checkPasswordStrength(password) {
            let strength = 0;
            const checks = {
                length: password.length >= 8,
                lowercase: /[a-z]/.test(password),
                uppercase: /[A-Z]/.test(password),
                numbers: /\d/.test(password),
                symbols: /[^A-Za-z0-9]/.test(password)
            };

            Object.values(checks).forEach(check => {
                if (check) strength++;
            });

            return {
                score: strength,
                level: strength < 2 ? 'weak' : strength < 4 ? 'fair' : strength < 5 ? 'good' : 'strong'
            };
        }

        // Update password strength indicator
        function updatePasswordStrength() {
            const password = document.getElementById('password').value;
            const strengthFill = document.getElementById('strengthFill');
            const strengthText = document.getElementById('strengthText');

            if (!password) {
                strengthFill.className = 'strength-fill';
                strengthText.textContent = 'Password strength: Weak';
                return;
            }

            const strength = checkPasswordStrength(password);
            strengthFill.className = `strength-fill strength-${strength.level}`;
            strengthText.textContent = `Password strength: ${strength.level.charAt(0).toUpperCase() + strength.level.slice(1)}`;
        }

        // Validate individual field
        function validateField(fieldName, value) {
            const rules = validationRules[fieldName];
            if (!rules) return { isValid: true };

            const errors = [];

            if (rules.required && (!value || value.trim() === '')) {
                errors.push(`${fieldName.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())} is required`);
            }

            if (value && rules.minLength && value.length < rules.minLength) {
                errors.push(`Must be at least ${rules.minLength} characters long`);
            }

            if (value && rules.pattern && !rules.pattern.test(value)) {
                switch (fieldName) {
                    case 'email':
                        errors.push('Please enter a valid email address');
                        break;
                    case 'phone':
                        errors.push('Please enter a valid phone number');
                        break;
                    case 'zipCode':
                        errors.push('Please enter a valid ZIP code');
                        break;
                    case 'username':
                        errors.push('Username can only contain letters, numbers, and underscores');
                        break;
                    case 'firstName':
                    case 'lastName':
                        errors.push('Name can only contain letters and spaces');
                        break;
                    default:
                        errors.push('Invalid format');
                }
            }

            // Special validations
            if (fieldName === 'confirmPassword') {
                const password = document.getElementById('password').value;
                if (value && value !== password) {
                    errors.push('Passwords do not match');
                }
            }

            if (fieldName === 'dateOfBirth' && value) {
                const birthDate = new Date(value);
                const today = new Date();
                const age = today.getFullYear() - birthDate.getFullYear();
                if (age < 13 || age > 120) {
                    errors.push('Please enter a valid date of birth');
                }
            }

            return {
                isValid: errors.length === 0,
                errors: errors
            };
        }

        // Show field error
        function showFieldError(fieldName, errors) {
            const errorElement = document.getElementById(`${fieldName}Error`);
            const inputElement = document.getElementById(fieldName) || document.querySelector(`[name="${fieldName}"]`);
            
            if (errorElement && errors.length > 0) {
                errorElement.innerHTML = `⚠️ ${errors[0]}`;
                errorElement.style.display = 'flex';
            }
            
            if (inputElement) {
                inputElement.classList.add('error');
                inputElement.classList.remove('success');
            }
        }

        // Show field success
        function showFieldSuccess(fieldName) {
            const errorElement = document.getElementById(`${fieldName}Error`);
            const successElement = document.getElementById(`${fieldName}Success`);
            const inputElement = document.getElementById(fieldName) || document.querySelector(`[name="${fieldName}"]`);
            
            if (errorElement) {
                errorElement.style.display = 'none';
            }
            
            if (successElement) {
                successElement.innerHTML = '✅ Looks good!';
                successElement.style.display = 'flex';
            }
            
            if (inputElement) {
                inputElement.classList.remove('error');
                inputElement.classList.add('success');
            }
        }

        // Clear field validation
        function clearFieldValidation(fieldName) {
            const errorElement = document.getElementById(`${fieldName}Error`);
            const successElement = document.getElementById(`${fieldName}Success`);
            const inputElement = document.getElementById(fieldName) || document.querySelector(`[name="${fieldName}"]`);
            
            if (errorElement) errorElement.style.display = 'none';
            if (successElement) successElement.style.display = 'none';
            
            if (inputElement) {
                inputElement.classList.remove('error', 'success');
            }
        }

        // Validate current step
        function validateCurrentStep() {
            let isValid = true;
            const currentStepElement = document.querySelector(`.form-step[data-step="${currentStep}"]`);
            const inputs = currentStepElement.querySelectorAll('input, select, textarea');

            inputs.forEach(input => {
                const fieldName = input.name || input.id;
                let value = input.value;

                // Handle radio buttons and checkboxes
                if (input.type === 'radio') {
                    const radioGroup = document.querySelectorAll(`input[name="${input.name}"]`);
                    value = Array.from(radioGroup).find(radio => radio.checked)?.value || '';
                } else if (input.type === 'checkbox' && input.name === 'terms') {
                    value = input.checked;
                } else if (input.type === 'checkbox') {
                    return; // Skip other checkboxes for validation
                }

                const validation = validateField(fieldName, value);
                
                if (!validation.isValid) {
                    showFieldError(fieldName, validation.errors);
                    isValid = false;
                } else if (validationRules[fieldName]) {
                    showFieldSuccess(fieldName);
                }
            });

            return isValid;
        }

        // Update progress bar
        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            progressFill.style.width = `${progress}%`;
            
            const stepNames = [
                'Personal Information',
                'Address Information', 
                'Account Details',
                'Preferences & Documents'
            ];
            
            progressText.textContent = `Step ${currentStep} of ${totalSteps} - ${stepNames[currentStep - 1]}`;
        }

        // Update step navigation
        function updateStepNavigation() {
            const steps = document.querySelectorAll('.step');
            steps.forEach((step, index) => {
                const stepNumber = index + 1;
                step.classList.remove('active', 'completed');
                
                if (stepNumber === currentStep) {
                    step.classList.add('active');
                } else if (stepNumber < currentStep) {
                    step.classList.add('completed');
                }
            });
        }

        // Show/hide form steps
        function showStep(step) {
            document.querySelectorAll('.form-step').forEach(stepElement => {
                stepElement.classList.remove('active');
            });
            
            document.querySelector(`.form-step[data-step="${step}"]`).classList.add('active');
            
            // Update button visibility
            prevBtn.style.display = step === 1 ? 'none' : 'inline-flex';
            nextBtn.style.display = step === totalSteps ? 'none' : 'inline-flex';
            submitBtn.style.display = step === totalSteps ? 'inline-flex' : 'none';
            
            updateProgress();
            updateStepNavigation();
        }

        // Handle account type change
        function handleAccountTypeChange() {
            const accountType = document.querySelector('input[name="accountType"]:checked')?.value;
            const studentFields = document.getElementById('studentFields');
            const facultyFields = document.getElementById('facultyFields');
            
            studentFields.style.display = 'none';
            facultyFields.style.display = 'none';
            
            if (accountType === 'student') {
                studentFields.style.display = 'block';
                document.getElementById('studentId').required = true;
            } else if (accountType === 'faculty' || accountType === 'staff') {
                facultyFields.style.display = 'block';
                document.getElementById('department').required = true;
            }
        }

        // Handle file upload
        function handleFileUpload(event) {
            const input = event.target;
            const file = input.files[0];
            const uploadContainer = input.closest('.file-upload');
            const uploadText = uploadContainer.querySelector('.file-upload-text');
            const uploadHint = uploadContainer.querySelector('.file-upload-hint');
            const fileType = input.id;
            
            if (file) {
                // Validate file size
                const maxSize = input.id === 'profilePicture' ? 5 * 1024 * 1024 : 10 * 1024 * 1024;
                
                if (file.size > maxSize) {
                    const maxSizeMB = maxSize / (1024 * 1024);
                    showFieldError(input.id, [`File size must be less than ${maxSizeMB}MB`]);
                    input.value = '';
                    return;
                }
                
                // Validate file type
                const allowedTypes = input.id === 'profilePicture' 
                    ? ['image/jpeg', 'image/png', 'image/gif'] 
                    : ['application/pdf', 'image/jpeg', 'image/png'];
                
                if (!allowedTypes.includes(file.type)) {
                    const allowedFormats = input.id === 'profilePicture' 
                        ? 'JPG, PNG, GIF' 
                        : 'PDF, JPG, PNG';
                    
                    showFieldError(input.id, [`Invalid file type. Please upload ${allowedFormats} file`]);
                    input.value = '';
                    return;
                }
                
                // Show success
                uploadText.textContent = file.name;
                uploadHint.textContent = `Size: ${(file.size / 1024 / 1024).toFixed(2)}MB`;
                uploadContainer.classList.add('success');
                clearFieldValidation(input.id);
            } else {
                // Reset if no file
                uploadText.textContent = input.id === 'profilePicture' 
                    ? 'Choose a profile picture' 
                    : 'Upload ID Document';
                uploadHint.textContent = input.id === 'profilePicture' 
                    ? 'PNG, JPG, GIF up to 5MB' 
                    : 'PDF, PNG, JPG up to 10MB';
                uploadContainer.classList.remove('success');
            }
        }

        // Go to next step
        function goToNextStep() {
            if (validateCurrentStep()) {
                currentStep++;
                showStep(currentStep);
            }
        }

        // Go to previous step
        function goToPrevStep() {
            currentStep--;
            showStep(currentStep);
        }

        // Handle form submission
        function handleFormSubmit(event) {
            event.preventDefault();
            
            if (validateCurrentStep()) {
                // Show loading state
                const loadingIcon = submitBtn.querySelector('.loading');
                loadingIcon.classList.remove('hidden');
                submitBtn.disabled = true;
                
                // Collect all form data
                const formElements = form.elements;
                for (let i = 0; i < formElements.length; i++) {
                    const element = formElements[i];
                    
                    if (element.name) {
                        if (element.type === 'checkbox' && element.name !== 'terms') {
                            // Handle checkboxes for interests and notifications
                            if (!formData[element.name]) {
                                formData[element.name] = [];
                            }
                            if (element.checked) {
                                formData[element.name].push(element.value);
                            }
                        } else if (element.type === 'radio') {
                            if (element.checked) {
                                formData[element.name] = element.value;
                            }
                        } else if (element.type === 'file') {
                            // Handle files separately
                            formData[element.name] = element.files[0]?.name || null;
                        } else {
                            formData[element.name] = element.value;
                        }
                    }
                }
                
                // Simulate API request
                setTimeout(() => {
                    // Hide loading state
                    loadingIcon.classList.add('hidden');
                    submitBtn.disabled = false;
                    
                    // Show success modal
                    successModal.classList.add('show');
                    
                    // Clear form
                    form.reset();
                    currentStep = 1;
                    showStep(1);
                    formData = {};
                    
                    // Reset file upload areas
                    document.querySelectorAll('.file-upload').forEach(upload => {
                        upload.classList.remove('success');
                        upload.querySelector('.file-upload-text').textContent = 
                            upload.id === 'profilePictureUpload' 
                                ? 'Choose a profile picture' 
                                : 'Upload ID Document';
                        upload.querySelector('.file-upload-hint').textContent = 
                            upload.id === 'profilePictureUpload' 
                                ? 'PNG, JPG, GIF up to 5MB' 
                                : 'PDF, PNG, JPG up to 10MB';
                    });
                    
                    // Reset password strength
                    document.getElementById('strengthFill').className = 'strength-fill';
                    document.getElementById('strengthText').textContent = 'Password strength: Weak';
                }, 2000);
            }
        }

        // Close modal
        function closeModal() {
            successModal.classList.remove('show');
        }

        // Initialize form functionality
        function initForm() {
            // Set initial step
            showStep(currentStep);
            
            // Event listeners
            nextBtn.addEventListener('click', goToNextStep);
            prevBtn.addEventListener('click', goToPrevStep);
            form.addEventListener('submit', handleFormSubmit);
            
            // Account type change
            document.querySelectorAll('input[name="accountType"]').forEach(radio => {
                radio.addEventListener('change', handleAccountTypeChange);
            });
            
            // Password strength indicator
            document.getElementById('password').addEventListener('input', updatePasswordStrength);
            
            // File uploads
            document.getElementById('profilePicture').addEventListener('change', handleFileUpload);
            document.getElementById('idDocument').addEventListener('change', handleFileUpload);
            
                // Drag and drop for file uploads
            const fileUploads = document.querySelectorAll('.file-upload');
            fileUploads.forEach(upload => {
                upload.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    upload.classList.add('dragover');
                });
                
                upload.addEventListener('dragleave', () => {
                    upload.classList.remove('dragover');
                });
                
                upload.addEventListener('drop', (e) => {
                    e.preventDefault();
                    upload.classList.remove('dragover');
                    const fileInput = upload.querySelector('input[type="file"]');
                    fileInput.files = e.dataTransfer.files;
                    
                    // Trigger change event
                    const event = new Event('change');
                    fileInput.dispatchEvent(event);
                });
            });
            
            // Real-time validation for username availability
            document.getElementById('username').addEventListener('blur', function() {
                const username = this.value;
                if (username && validateField('username', username).isValid) {
                    // Simulate username availability check
                    setTimeout(() => {
                        const isAvailable = Math.random() > 0.3; // 70% chance available
                        if (isAvailable) {
                            showFieldSuccess('username');
                        } else {
                            showFieldError('username', ['Username is already taken']);
                        }
                    }, 500);
                }
            });
            
            // Real-time validation for password match
            document.getElementById('confirmPassword').addEventListener('input', function() {
                const password = document.getElementById('password').value;
                const confirmPassword = this.value;
                
                if (confirmPassword && password) {
                    if (password === confirmPassword) {
                        showFieldSuccess('confirmPassword');
                    } else {
                        showFieldError('confirmPassword', ['Passwords do not match']);
                    }
                }
            });
            
            // Clear validation on focus
            document.querySelectorAll('input, select, textarea').forEach(input => {
                input.addEventListener('focus', () => {
                    clearFieldValidation(input.name || input.id);
                });
            });
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', initForm);
    </script>
</body>
</html>